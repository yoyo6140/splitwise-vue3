(function(){"use strict";var e={7687:function(e,t,s){var n=s(5130),a=s(6768);const r={class:"container"},l={class:"row justify-content-center mb-3"},i={class:"col-10"},o={class:"card shadow-sm"},m={class:"card-body"},c={class:"row justify-content-center mb-3"},d={class:"col-10"},u={class:"card shadow-sm"},p={class:"card-body"},b={class:"row justify-content-center mb-3"},h={class:"col-10"},v={class:"card shadow-sm"},y={class:"card-body"},f={class:"row justify-content-center mb-3"},k={class:"col-10"},x={class:"card shadow-sm"},L={class:"card-body"},g={class:"row justify-content-center"},E={class:"col-8 text-end"};function w(e,t,s,n,w,C){const M=(0,a.g2)("member-list"),X=(0,a.g2)("expense-input"),_=(0,a.g2)("expense-list"),B=(0,a.g2)("balance-list");return(0,a.uX)(),(0,a.CE)("div",r,[t[5]||(t[5]=(0,a.Lk)("h1",{class:"text-center my-3"},"Splitwise 分帳小幫手",-1)),(0,a.Lk)("div",l,[(0,a.Lk)("div",i,[(0,a.Lk)("div",o,[(0,a.Lk)("div",m,[t[1]||(t[1]=(0,a.Lk)("h5",{class:"card-title"},"分帳成員",-1)),(0,a.bF)(M,{members:w.members,onUpdateMembers:C.updateMembers,onDeleteMemberExpenses:C.deleteMemberExpenses},null,8,["members","onUpdateMembers","onDeleteMemberExpenses"])])])])]),(0,a.Lk)("div",c,[(0,a.Lk)("div",d,[(0,a.Lk)("div",u,[(0,a.Lk)("div",p,[t[2]||(t[2]=(0,a.Lk)("h5",{class:"card-title"},"新增支出款項",-1)),(0,a.bF)(X,{members:w.members,onAddExpense:C.addExpense},null,8,["members","onAddExpense"])])])])]),(0,a.Lk)("div",b,[(0,a.Lk)("div",h,[(0,a.Lk)("div",v,[(0,a.Lk)("div",y,[t[3]||(t[3]=(0,a.Lk)("h5",{class:"card-title"},"帳款清單",-1)),(0,a.bF)(_,{members:w.members,expenses:w.expenses,onDeleteExpense:C.deleteExpense},null,8,["members","expenses","onDeleteExpense"])])])])]),(0,a.Lk)("div",f,[(0,a.Lk)("div",k,[(0,a.Lk)("div",x,[(0,a.Lk)("div",L,[t[4]||(t[4]=(0,a.Lk)("h5",null,"成員應付/應收",-1)),(0,a.bF)(B,{members:w.members,expenses:w.expenses},null,8,["members","expenses"])])])])]),(0,a.Lk)("div",g,[(0,a.Lk)("div",E,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>C.clearAll&&C.clearAll(...e)),class:"btn btn-danger mb-3"}," 清除全部資料 ")])])])}s(4114),s(8111),s(2489);var C=s(4232);const M={key:0,class:"text-muted"},X={key:1},_=["onClick"],B={class:"d-flex mt-3 gap-2"};function I(e,t,s,r,l,i){return(0,a.uX)(),(0,a.CE)("section",null,[0===s.members.length?((0,a.uX)(),(0,a.CE)("div",M,"尚無成員")):((0,a.uX)(),(0,a.CE)("div",X,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.members,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"d-flex justify-content-between align-items-center mb-2 p-2 border rounded"},[(0,a.Lk)("span",null,(0,C.v_)(e.name),1),(0,a.Lk)("button",{onClick:t=>i.deleteMember(e.id),class:"btn btn-sm btn-danger"},"刪除",8,_)]))),128))])),(0,a.Lk)("div",B,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.newName=e),placeholder:"輸入成員姓名",class:"form-control rounded-start me-2"},null,512),[[n.Jo,l.newName]]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(0,n.D$)((...e)=>i.addMember&&i.addMember(...e),["prevent"])),class:"btn btn-primary rounded-end",style:{"white-space":"nowrap"}},"新增成員")])])}var O={name:"MemberList",props:["members"],data(){return{newName:""}},methods:{addMember(){if(!this.newName.trim())return alert("請輸入名字");const e={id:Date.now().toString(),name:this.newName.trim()};this.$emit("update-members",[...this.members,e]),this.newName=""},deleteMember(e){const t=this.members.filter(t=>t.id!==e);this.$emit("update-members",t),this.$emit("delete-member-expenses",e)}}},D=s(1241);const j=(0,D.A)(O,[["render",I]]);var S=j;const N={class:"mb-3"},A={class:"mb-3"},F={class:"mb-3"},$=["value"];function J(e,t,s,r,l,i){return(0,a.uX)(),(0,a.CE)("section",null,[(0,a.Lk)("div",N,[t[4]||(t[4]=(0,a.Lk)("label",null,"款項名稱",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.payname=e),placeholder:"請輸入款項名稱",class:"form-control w-100"},null,512),[[n.Jo,l.payname]])]),(0,a.Lk)("div",A,[t[5]||(t[5]=(0,a.Lk)("label",null,"款項金額",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>l.paymoney=e),min:"0",class:"form-control w-100"},null,512),[[n.Jo,l.paymoney,void 0,{number:!0}]])]),(0,a.Lk)("div",F,[(0,a.Lk)("label",null,[t[7]||(t[7]=(0,a.eW)("由誰付款 ",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.paidBy=e),class:"form-select"},[t[6]||(t[6]=(0,a.Lk)("option",{value:""},"請選擇付款人",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.members,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,C.v_)(e.name),9,$))),128))],512),[[n.u1,l.paidBy]])]),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(0,n.D$)((...e)=>i.addExpense&&i.addExpense(...e),["prevent"])),class:"btn btn-success ms-2"},"增加支出")])])}var U={name:"ExpenseInput",props:["members"],data(){return{payname:"",paymoney:"",paidBy:""}},methods:{addExpense(){if(!this.payname.trim())return alert("請輸入款項名稱");if(!this.paymoney||this.paymoney<=0)return"請輸入正確金額";if(!this.paidBy)return alert("請選擇付款人");const e={id:Date.now().toString(),payname:this.payname,paymoney:this.paymoney,paidBy:this.paidBy};this.$emit("add-expense",e),this.payname="",this.paymoney=0,this.paidBy=""}}};const K=(0,D.A)(U,[["render",J]]);var P=K;const V={key:0,class:"text-muted"},T={key:1,class:"list-group"},W=["onClick"];function q(e,t,s,r,l,i){return(0,a.uX)(),(0,a.CE)("section",null,[0===s.expenses.length?((0,a.uX)(),(0,a.CE)("div",V,"尚無支出紀錄")):((0,a.uX)(),(0,a.CE)("div",T,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.expenses,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,a.Lk)("span",null,(0,C.v_)(e.payname)+" - "+(0,C.v_)(e.paymoney)+"元 - "+(0,C.v_)(i.getPayerName(e.paidBy)),1),(0,a.Lk)("button",{onClick:(0,n.D$)(t=>i.deleteItem(e.id),["prevent"]),class:"btn btn-sm btn-outline-danger"},"刪除",8,W)]))),128))]))])}s(116);var z={name:"ExpenseList",props:["members","expenses"],methods:{getPayerName(e){const t=this.members.find(t=>t.id==e);return t?t.name:"未知"},deleteItem(e){this.$emit("delete-expense",e)}}};const G=(0,D.A)(z,[["render",q]]);var H=G;const Q={key:0,class:"text-muted"},R={key:1,class:"table table-striped"};function Y(e,t,s,n,r,l){return(0,a.uX)(),(0,a.CE)("section",null,[0===s.members.length?((0,a.uX)(),(0,a.CE)("div",Q,"尚無新增支出")):((0,a.uX)(),(0,a.CE)("table",R,[t[0]||(t[0]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"成員姓名"),(0,a.Lk)("th",null,"應付/應收")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.members,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,C.v_)(e.name),1),(0,a.Lk)("td",{class:(0,C.C4)(l.getBalanceClass(e.id))},(0,C.v_)(l.formatBalance(e.id)),3)]))),128))])]))])}s(7588),s(8237);var Z={name:"BalanceList",props:["members","expenses"],computed:{balanceMap(){const e={};this.members.forEach(t=>e[t.id]=0);const t=this.expenses||[],s=t.reduce((e,t)=>e+t.paymoney,0),n=this.members.length?s/this.members.length:0;t.forEach(t=>{void 0!==e[t.paidBy]&&(e[t.paidBy]+=t.paymoney)});const a={};for(const r in e)a[r]=e[r]-n;return a}},methods:{formatBalance(e){const t=this.balanceMap[e];return t>0?`應收 ${t.toFixed(2)} 元`:t<0?`應付 ${Math.abs(t).toFixed(2)} 元`:"已結清"},getBalanceClass(e){const t=this.balanceMap[e];return t>0?"table-success":t<0?"table-danger":""}}};const ee=(0,D.A)(Z,[["render",Y],["__scopeId","data-v-705f2ea7"]]);var te=ee,se={name:"App",components:{MemberList:S,ExpenseInput:P,ExpenseList:H,BalanceList:te},data(){return{members:JSON.parse(localStorage.getItem("splitwise_members"))||[],expenses:JSON.parse(localStorage.getItem("splitwise_expenses"))||[]}},methods:{saveData(){localStorage.setItem("splitwise_members",JSON.stringify(this.members)),localStorage.setItem("splitwise_expenses",JSON.stringify(this.expenses))},updateMembers(e){this.members=e,this.saveData()},addExpense(e){this.expenses.push(e),this.saveData()},deleteExpense(e){this.expenses=this.expenses.filter(t=>t.id!==e),this.saveData()},deleteMemberExpenses(e){this.expenses=this.expenses.filter(t=>t.paidBy!==e),this.saveData()},clearAll(){confirm("確定要清除所有成員與支出嗎？")&&(this.members=[],this.expenses=[],localStorage.removeItem("splitwise_members"),localStorage.removeItem("splitwise_expenses"))}}};const ne=(0,D.A)(se,[["render",w]]);var ae=ne;(0,n.Ef)(ae).mount("#app")}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,n,a,r){if(!n){var l=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],r=e[c][2];for(var i=!0,o=0;o<n.length;o++)(!1&r||l>=r)&&Object.keys(s.O).every(function(e){return s.O[e](n[o])})?n.splice(o--,1):(i=!1,r<l&&(l=r));if(i){e.splice(c--,1);var m=a();void 0!==m&&(t=m)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,a,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,l=n[0],i=n[1],o=n[2],m=0;if(l.some(function(t){return 0!==e[t]})){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(o)var c=o(s)}for(t&&t(n);m<l.length;m++)r=l[m],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(c)},n=self["webpackChunksplitwist_vue3"]=self["webpackChunksplitwist_vue3"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],function(){return s(7687)});n=s.O(n)})();
//# sourceMappingURL=app.fe4ee29a.js.map